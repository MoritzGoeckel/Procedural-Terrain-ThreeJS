<html>
<html>
 <head>
    <script src="three.js-master/build/three.js"></script>
    <script src="three.js-master/examples/js/controls/OrbitControls.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script type="text/javascript" src="Player.js"></script>
    <script type="text/javascript" src="Wall.js"></script>
    <script type="text/javascript" src="Terrain.js"></script>
    <script type="text/javascript" src="HeightMapGenerator.js"></script>

    <script type="text/javascript" src="http://threejs.org/examples/js/controls/OrbitControls.js"></script>

    <script type="text/javascript">

    $(function()
    {
        //scene
        scene = new THREE.Scene();
        //Fog
				scene.fog = new THREE.Fog( 0xffffff, 1000, 10000 );

        //Camera and controlls
        camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 1000 );
				camera.position.z = 500;

				controls = new THREE.OrbitControls( camera );
				controls.damping = 0.2;
				controls.addEventListener( 'change', render );
        // /Camera and Controlls


        //renderer
        var renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );

        renderer.shadowMapEnabled = true;
        renderer.shadowMapSoft = true;

        //controls
        //var controls = new THREE.OrbitControls( camera, renderer.domElement );

        //show canvas
        $("#canvas-container").html(renderer.domElement);

        //lights

        //Spot
        var spotLight = new THREE.SpotLight( 0xffffff );
        spotLight.position.set( 10, 10, 30 );
        spotLight.castShadow = true;
        spotLight.shadowMapWidth = 1024;
        spotLight.shadowMapHeight = 1024;
        spotLight.shadowCameraNear = 500;
        spotLight.shadowCameraFar = 4000;
        spotLight.shadowCameraFov = 30;
        scene.add( spotLight );

        //Point
        var light = new THREE.PointLight( 0xff0000, 1, 100 );
        light.position.set( 0, 0, 0 );
        //scene.add( light );

        //Directional
        var directionalLight = new THREE.DirectionalLight( 0x333333, 2 );
				directionalLight.position.set( 30, 30, 30 );
        directionalLight.target.position.set(0, 0, -30);
        directionalLight.castShadows = true;
				//scene.add( directionalLight );

        //Hemi
				var hemiLight = new THREE.HemisphereLight( 0xaabbff, 0x040404, 0.4 );
				scene.add( hemiLight );

        //plane
        //Create the terrain
        var generator = new HeightMapGenerator();
        var terrain = new Terrain(new THREE.Vector3(0, 10, -30), 64, generator.generate(64));
        terrain.addToScene(scene);

        //Cube
        var c_geometry = new THREE.BoxGeometry(1,1,1);
        var c_material = new THREE.MeshLambertMaterial( { color: 0xffffff } );
        var c_mesh = new THREE.Mesh( c_geometry, c_material );
        c_mesh.castShadow = true;
        c_mesh.position.set(0, 0, 0);
        c_mesh.receiveShadow = true;
        scene.add(c_mesh);

        //render scene
        var render = function () {
            requestAnimationFrame(render);
            renderer.render(scene, camera);
        };

        render();
    });

    </script>

    </head>
    <body style="background: black">

        <div id="canvas-container" style="position: absolute; left:0px; top:0px"></div>

    </body>
</html>
